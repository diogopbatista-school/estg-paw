<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0" />
    <title>Editar Restaurante</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet" />
    <link
      href="/stylesheets/restaurant/edit.css"
      rel="stylesheet" />
  </head>

  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg">
      <div class="container-fluid">
        <a
          class="navbar-brand"
          href="#">
          <i class="fas fa-store me-2"></i>Editar Restaurante
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div
          class="collapse navbar-collapse"
          id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a
                class="nav-link"
                href="/restaurants/dashboard/<%= restaurant._id %>">
                <i class="fas fa-arrow-left me-1"></i> Voltar
              </a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                href="/user/logout">
                <i class="fas fa-sign-out-alt me-1"></i> Logout
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container mt-5">
      <div class="form-container">
        <h1><i class="fas fa-edit me-2"></i>Editar Restaurante</h1>

        <% if (error) { %>
        <div class="alert alert-danger"><i class="fas fa-exclamation-triangle me-2"></i><%= error %></div>
        <% } %>

        <!-- Imagem atual do restaurante (se existir) -->
        <% if (restaurant.image) { %>
        <div class="restaurant-image-container mb-4">
          <h6 class="mb-3">Imagem Atual</h6>
          <img
            src="<%= restaurant.image %>"
            alt="<%= restaurant.name %>"
            class="restaurant-image" />
        </div>
        <% } %>

        <form
          action="/restaurants/submitEdit/<%= restaurant._id %>"
          method="POST"
          enctype="multipart/form-data">
          <!-- Nome -->
          <div class="mb-4">
            <label
              for="name"
              class="form-label">
              Nome do Restaurante
            </label>
            <div class="input-group">
              <span class="input-group-text"><i class="fas fa-utensils"></i></span>
              <input
                type="text"
                class="form-control"
                id="name"
                name="name"
                value="<%= restaurant.name %>"
                required />
            </div>
          </div>

          <!-- Descrição -->
          <div class="mb-4">
            <label
              for="description"
              class="form-label">
              Descrição
            </label>
            <div class="input-group">
              <span class="input-group-text"><i class="fas fa-align-left"></i></span>
              <textarea
                class="form-control"
                id="description"
                name="description"
                rows="3">
<%= restaurant.description %></textarea
              >
            </div>
            <small class="form-text text-muted mt-1">Forneça uma descrição detalhada para atrair mais clientes.</small>
          </div>

          <!-- Localização -->
          <div class="location-group mb-4">
            <h5 class="location-title"><i class="fas fa-map-marker-alt me-2"></i>Localização</h5>
            <div class="row">
              <div class="col-md-6">
                <label
                  for="latitude"
                  class="form-label">
                  Latitude
                </label>
                <div class="input-group">
                  <span class="input-group-text"><i class="fas fa-compass"></i></span>
                  <input
                    type="number"
                    step="any"
                    class="form-control"
                    id="latitude"
                    name="latitude"
                    value="<%= restaurant.location.latitude %>"
                    required />
                </div>
              </div>
              <div class="col-md-6">
                <label
                  for="longitude"
                  class="form-label">
                  Longitude
                </label>
                <div class="input-group">
                  <span class="input-group-text"><i class="fas fa-compass"></i></span>
                  <input
                    type="number"
                    step="any"
                    class="form-control"
                    id="longitude"
                    name="longitude"
                    value="<%= restaurant.location.longitude %>"
                    required />
                </div>
              </div>
            </div>
          </div>

          <!-- Telefone -->
          <div class="mb-4">
            <label
              for="phone"
              class="form-label">
              Telefone
            </label>
            <div class="input-group">
              <span class="input-group-text"><i class="fas fa-phone"></i></span>
              <input
                type="number"
                class="form-control"
                id="phone"
                name="phone"
                value="<%= restaurant.phone %>"
                required />
            </div>
          </div>

          <!-- Imagem do Restaurante -->
          <div class="mb-4">
            <label
              for="image"
              class="form-label">
              Nova Imagem do Restaurante
            </label>
            <div class="input-group">
              <span class="input-group-text"><i class="fas fa-image"></i></span>
              <input
                type="file"
                class="form-control"
                id="image"
                name="image" />
            </div>
            <small class="form-text text-muted mt-1">Deixe em branco para manter a imagem atual.</small>
          </div>

          <!-- Botões -->
          <div class="d-flex justify-content-between mt-4">
            <a
              href="/restaurants/dashboard/<%= restaurant._id %>"
              class="btn btn-secondary">
              <i class="fas fa-times me-2"></i>Cancelar
            </a>
            <button
              type="submit"
              class="btn btn-primary">
              <i class="fas fa-save me-2"></i>Salvar Alterações
            </button>
          </div>
        </form>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>

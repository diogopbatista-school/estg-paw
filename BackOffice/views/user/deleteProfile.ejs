<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta charset="UTF-8" />
    <title>Apagar Perfil</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  </head>

  <body>
    <div class="container mt-5">
      <h1>Apagar Perfil</h1>
      <% if (error && error !== "") { %>
      <div class="alert alert-danger"> <%= error %> </div>
      <% } %>
      <p class="text-warning"> Tem a certeza que deseja apagar este perfil? Esta ação não poderá ser desfeita.</p>
      <form action="/user/submitDelete/<%= user._id %>" method="POST">
        <% if (loggedInUser.role !== "admin" && loggedInUser.role !== "superAdmin") { %>
        <!-- Password apenas para o próprio user -->
        <div class="mb-3">
          <label for="password" class="form-label"> Password </label>
          <input
            type="password"
            class="form-control"
            id="password"
            name="password"
            placeholder="Digite a sua password"
            required />
        </div>

        <div class="mb-3">
          <label for="confirmPassword" class="form-label"> Confirmar Password </label>
          <input
            type="password"
            class="form-control"
            id="confirmPassword"
            name="confirmPassword"
            placeholder="Confirme a sua password"
            required />
        </div>
        <% } else { %>
        <!-- Mensagem de aviso para o admin -->
        <p class="text-danger"> Como administrador, você pode apagar este perfil sem inserir a password.</p>
        <% } %>
        <button type="submit" class="btn btn-danger"> Apagar Perfil </button>
      </form>
      <a href="/user/dashboard" class="btn btn-secondary mt-3"> Cancelar </a>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
